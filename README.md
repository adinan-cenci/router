A basic router. Inspired by bramus/router implementation